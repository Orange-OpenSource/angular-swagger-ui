/*
 * Orange angular-swagger-ui - v0.2.3
 *
 * (C) 2015 Orange, all right reserved
 * MIT Licensed
 */
"use strict";angular.module("swaggerUi").service("swagger1ToSwagger2Converter",["$q","$http","swaggerModules",function(a,b,c){function d(d){var e=a.defer(),f={method:"GET",url:d};return c.execute(c.BEFORE_LOAD,f).then(function(){b(f).success(e.resolve).error(e.reject)})["catch"](e.reject),e.promise}function e(b,c,e){var f=e.info;f.contact={email:f.contact},f.license={name:f.license,url:f.licenseUrl},f.termsOfService=f.termsOfServiceUrl,e.paths={},e.definitions={},e.tags=[];var g=[];angular.forEach(e.apis,function(a){g.push(d(c+a.path))}),a.all(g).then(function(a){angular.forEach(a,function(a){e.info.version=e.info.version||a.apiVersion;var b=a.basePath,c=$("<a>",{href:b})[0];e.basePath=e.basePath||c.pathname,e.host=c.hostname,e.schemes=[],e.schemes[0]=c.protocol&&c.protocol.replace(":",""),e.tags.push({name:a.resourcePath}),angular.forEach(a.apis,function(b){var c=e.paths[b.path]=e.paths[b.path]||{};angular.forEach(b.operations,function(b){var d={};c[b.method.toLowerCase()]={deprecated:b.deprecated,description:b.notes,summary:b.summary,operationId:b.nickname,produces:b.produces||a.produces,consumes:b.consumes||a.consumes,parameters:b.parameters,responses:d,tags:[a.resourcePath]},angular.forEach(b.parameters,function(b){b["in"]=b.paramType,a.models&&a.models[b.type]&&(b.schema={$ref:"#/definitions/"+b.type},delete b.type)}),angular.forEach(b.responseMessages,function(c){var e=d[c.code]={description:c.message};c.responseModel?a.models&&a.models[c.responseModel]?e.schema={$ref:"#/definitions/"+c.responseModel}:e.type=c.responseModel:200===c.code&&"void"!==b.type&&(e.schema={type:b.type},"array"===b.type&&(e.schema.items={$ref:a.models&&a.models[b.items.type]?"#/definitions/"+b.items.type:b.items.type}))})})}),angular.forEach(a.models,function(b,c){e.definitions[c]=b,b.subTypes&&(angular.forEach(b.subTypes,function(c){var d=a.models&&a.models[c];d&&(b.required=(b.required||[]).concat(d.required||[]),angular.forEach(d.properties,function(a,c){b.properties[c]=a}))}),delete b.subTypes),angular.forEach(b.properties,function(b){a.models&&a.models[b.type]&&(b.$ref="#/definitions/"+b.type,delete b.type),b.items&&a.models&&a.models[b.items.type]&&(b.items.$ref="#/definitions/"+b.items.type,delete b.items.type)})})}),e.swagger="2.0",b.resolve(!0)})["catch"](b.reject)}this.execute=function(b,c){var d=a.defer(),f=c.swaggerVersion;return f&&0===f.indexOf("1.")?e(d,b,c):d.resolve(!1),d.promise}}]);