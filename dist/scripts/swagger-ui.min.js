/*
 * Orange angular-swagger-ui - v0.1.5
 *
 * (C) 2015 Orange, all right reserved
 * MIT Licensed
 */
"use strict";angular.module("swaggerUi",["ng","ngSanitize","swaggerUiTemplates"]).directive("swaggerUi",function(){return{restrict:"A",controller:"swaggerUiController",templateUrl:"templates/swagger-ui.html",scope:{url:"=",apiExplorer:"=",errorHandler:"=",apiExplorerTransform:"="}}}).controller("swaggerUiController",["$scope","$http","$sce","$location","swaggerModel","swaggerClient",function(a,b,c,d,e,f){function g(c,d){a.loading=!0;var e="function"==typeof a.errorHandler;b.get(c).success(function(b){a.loading=!1,d(b)}).error(function(b,c){a.loading=!1,e&&a.errorHandler(b,c)})}function h(a,b,c,d){var e=b.$ref;if(e){if(0===e.indexOf("http"))Array.isArray(c[e])?c[e].push({obj:b,resolveAs:"inline"}):c[e]=[{obj:b,resolveAs:"inline"}];else if(0===e.indexOf("#")){var f,g=e.substring(1),h=g.split("/"),j=a;for(f=0;f<h.length;f++){var k=h[f];k.length>0&&(j=j[k])}if(j){delete b.$ref;var l;for(l in j)b[l]=j[l]}else d[e]=null}}else"array"===b.type&&i(b.items,c)}function i(a,b){var c=a.$ref;if(c)0===c.indexOf("http")&&(Array.isArray(b[c])?b[c].push({obj:a,resolveAs:"$ref"}):b[c]=[{obj:a,resolveAs:"$ref"}]);else if("array"===a.type){var d=a.items;i(d,b)}}function j(){a.infos=k.info,a.infos.scheme=k.schemes&&k.schemes[0]||"http",a.infos.basePath=k.basePath,a.infos.host=k.host,a.infos.description=c.trustAsHtml(a.infos.description);var b=0,f=0,g={},j={},l=[],m=d.search().open,n={},o={};for(var p in k.definitions){var q=k.definitions[p];for(var r in q.properties){var s=q.properties[r];i(s,o)}}if(k.tags)for(var t=0,u=k.tags.length;u>t;t++){var v=k.tags[t];l.push(v),g[v.name]=t}else l.push({name:"default",open:!0}),g["default"]=0;for(var w in k.paths)for(var x in k.paths[w]){var y=k.paths[w][x];y.consumes||(y.consumes=k.consumes),y.produces||(y.produces=k.produces),y.id=b,j[b]={contentType:y.consumes&&1===y.consumes.length?y.consumes[0]:"application/json",responseType:"application/json"},y.httpMethod=x,y.path=w;for(var z=0,A=y.parameters||[],B=A.length;B>z;z++){var C=A[z];C.id=f,C.type=e.getType(C),C.items&&C.items["enum"]&&(C["enum"]=C.items["enum"],C["default"]=C.items["default"]),C.subtype=C["enum"]?"enum":C.type,j[b][C.name]=C["default"]||"",C.schema&&(C.schema.display=1,C.schema.json=e.generateSampleJson(k,C.schema),C.schema.model=c.trustAsHtml(e.generateModel(k,C.schema))),"body"===C["in"]&&(y.consumes=y.consumes||["application/json"]),C.$ref&&h(k,C,o,n),f++}if(y.responses)for(var D in y.responses){var E=y.responses[D];E.description=c.trustAsHtml(E.description),E.schema?(E.schema.json=e.generateSampleJson(k,E.schema),"object"===E.schema.type||"array"===E.schema.type||E.schema.$ref?(E.display=1,E.schema.model=c.trustAsHtml(e.generateModel(k,E.schema))):"string"===E.schema.type&&delete E.schema,"200"===D||"201"===D?(y.responseClass=E,y.responseClass.display=1,y.responseClass.status=D,delete y.responses[D]):y.hasResponses=!0):y.hasResponses=!0}y.tags=y.tags||["default"];var v=y.tags[0];"undefined"==typeof g[v]&&(g[v]=l.length,l.push({name:v}));var F=l[g[y.tags[0]]];y.open=m&&(m===y.operationId||m===F.name+"*"),F.operations=F.operations||[],F.operations.push(y),y.open&&(F.open=!0),b++}for(var t=0;t<l.length;t++){var F=l[t],G=l[t].operations;F.open=F.open||m===F.name||m===F.name+"*",(!G||G&&0===G.length)&&l.splice(t,1)}l.sort(function(a,b){return a.name>b.name?1:a.name<b.name?-1:0}),e.clearCache(),a.form=j,a.resources=l}var k;a.$watch("url",function(b){if(a.infos={},a.resources=[],a.form={},b&&""!==b){var c="function"==typeof a.errorHandler;g(b,function(b){k=b,"2.0"===b.swagger?j(k):c&&a.errorHandler("unsupported swagger version","415")})}}),a.expand=function(a,b){a.open=!0;for(var c=0,d=a.operations,e=d.length;e>c;c++)d[c].open=b},a.permalink=function(a){d.search("open",a)},a.submitExplorer=function(b){b.loading=!0,f.send(k,b,a.form[b.id],a.apiExplorerTransform).then(function(a){b.loading=!1,b.explorerResult=a})}}]).directive("fileInput",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.bind("change",function(){a.$apply(function(){d.$setViewValue(b[0].files[0])})})}}}),angular.module("swaggerUi").service("swaggerClient",["$q","$http",function(a,b){function c(a){var b="",c=/(>)(<)(\/*)/g;a=a.replace(c,"$1\r\n$2$3");var d=0;return angular.forEach(a.split("\r\n"),function(a,c){var e=0;console.log("printing node..."),console.log(a),a.match(/.+<\/\w[^>]*>$/)?e=0:a.match(/^<\/\w/)?0!=d&&(d-=1):e=a.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var f="",g=0;d>g;g++)f+="  ";b+=f+a+"\r\n",d+=e}),b}function d(a,b,d,e,f){var g="";if(f.params){var h=[];for(var i in f.params)h.push(i+"="+encodeURIComponent(f.params[i]));h.length>0&&(g="?"+h.join("&"))}a.resolve({url:f.url+g,response:{body:b?(e.Accept="application/xml")?c(b):angular.toJson(b,!0):"no content",status:d,headers:angular.toJson(e(),!0)}})}this.send=function(c,e,f,g){for(var h=a.defer(),i={},j={},k=e.path,l=0,m=e.parameters||[],n=m.length;n>l;l++){var o=m[l],p=f[o.name];switch(o["in"]){case"query":p&&(i[o.name]=p);break;case"path":k=k.replace("{"+o.name+"}",encodeURIComponent(p));break;case"header":p&&(j[o.name]=p);break;case"formData":f.body=f.body||new FormData,p&&("file"===o.type&&(f.contentType=void 0),f.body.append(o.name,p))}}j.Accept=f.responseType,j["Content-Type"]=f.body?f.contentType:"text/plain";var q={method:e.httpMethod,url:[c.schemes&&c.schemes[0]||"http","://",c.host,c.basePath||"",k].join(""),headers:j,data:f.body,params:i},r=function(a,b,c,e){d(h,a,b,c,e)};return"function"==typeof g&&g(q),b(q).success(r).error(r),h.promise}}]),angular.module("swaggerUi").service("swaggerModel",function(){function a(a){return a.$ref.replace("#/definitions/","")}function b(e,g){var h;if(g["default"]||g.example)h=g["default"]||g.example;else if(g.properties){h={};for(var i in g.properties)h[i]=b(e,g.properties[i])}else if(g.$ref){var j=e.definitions&&e.definitions[a(g)];j&&(d[g.$ref]||(d[g.$ref]=b(e,j)),h=d[g.$ref])}else h="array"===g.type?[b(e,g.items)]:"object"===g.type?{}:c(f(g));return h}function c(a){var b;switch(a){case"long":case"integer":b=0;break;case"boolean":b=!1;break;case"double":case"number":b=0;break;case"string":b="string";break;case"date":b=(new Date).toISOString().split("T")[0];break;case"date-time":b=(new Date).toISOString()}return b}var d={},e={},f=this.getType=function(a){var b=a.format;switch(b){case"int32":b=a.type;break;case"int64":b="long"}return b||a.type};this.generateSampleJson=function(a,c){var d,e=b(a,c);return e&&(d=angular.toJson(e,!0)),d};var g=0,h=this.generateModel=function(b,c,d){function i(a,b){return a.required&&-1!==a.required.indexOf(b)}var j="";if(c.properties){d=d||"Inline Model"+g++;var k=["<div><strong>"+d+" {</strong>"],l=[];for(var m in c.properties){var n=c.properties[m];if(k.push('<div class="pad"><strong>',m,'</strong> (<span class="type">'),n.properties){var o="Inline Model"+g++;k.push(o),l.push(h(b,n,o))}else if(n.$ref)k.push(a(n)),l.push(h(b,n));else if("array"===n.type){if(k.push("Array["),n.items.properties){var o="Inline Model"+g++;k.push(o),l.push(h(b,n,o))}else n.items.$ref?(k.push(a(n.items)),l.push(h(b,n.items))):k.push(f(n.items));k.push("]")}else k.push(f(n));k.push("</span>"),i(c,m)||k.push(", ","<em>optional</em>"),k.push(")"),n.description&&k.push(": ",n.description),n["enum"]&&k.push(" = ",angular.toJson(n["enum"]).replace(/,/g," or ")),k.push(",</div>")}k.pop(),k.push("</div>"),k.push("<strong>}</strong>"),k.push(l.join(""),"</div>"),j=k.join("")}else if(c.$ref){var p=a(c),q=b.definitions&&b.definitions[p];q&&(e[c.$ref]||(e[c.$ref]=h(b,q,p)),j=e[c.$ref])}else if("array"===c.type){var k=["<strong>Array ["],r="";if(c.items.properties){var o="Inline Model"+g++;k.push(o),r=h(b,c.items,o)}else c.items.$ref?(k.push(a(c.items)),r=h(b,c.items)):k.push(f(c.items));k.push("]</strong><br><br>",r),j=k.join("")}else"object"===c.type&&(j="<strong>Inline Model {<br>}</strong>");return j};this.clearCache=function(){d={},e={}}}),angular.module("swaggerUiTemplates",["templates/swagger-ui.html"]),angular.module("templates/swagger-ui.html",[]).run(["$templateCache",function(a){a.put("templates/swagger-ui.html",'<div class="swagger-ui" aria-live="polite" aria-relevant="additions removals"> <h3 class="swagger-loading" ng-if="loading">loading ...</h3> <div class="api-name"> <h3 ng-bind="infos.title"></h3> </div> <div class="api-description" ng-bind-html="infos.description"></div> <div class="api-infos"> <div class="api-infos-contact" ng-if="infos.contact"> <div ng-if="infos.contact.name" class="api-infos-contact-name">created by <span ng-bind="infos.contact.name"></span></div> <div ng-if="infos.contact.url" class="api-infos-contact-url">see more at <a href="{{infos.contact.url}}" ng-bind="infos.contact.url"></a></div> <a ng-if="infos.contact.email" class="api-infos-contact-url" href="mailto:{{infos.contact.email}}?subject={{infos.title}}">contact the developer</a> </div> <div class="api-infos-license" ng-if="infos.license"> <span>license: </span><a href="{{infos.license.url}}" ng-bind="infos.license.name"></a> </div> </div> <ul class="list-unstyled endpoints"> <li ng-repeat="api in resources" class="endpoint" ng-class="{active:api.open}"> <div class="clearfix"> <ul class="list-inline pull-left endpoint-heading"> <li> <h4> <a href="javascript:;" ng-click="api.open=!api.open;permalink(api.open?api.name:null)" ng-bind="api.name"></a> <span ng-if="api.description"> : <span ng-bind="api.description"></span></span> </h4> </li> </ul> <ul class="list-inline pull-right endpoint-actions"> <li> <a href="javascript:;" ng-click="api.open=!api.open;permalink(api.open?api.name:null)">open/hide</a> </li> <li> <a href="javascript:;" ng-click="expand(api);permalink(api.name)">list operations</a> </li> <li> <a href="javascript:;" ng-click="expand(api,true);permalink(api.name+\'*\')">expand operations</a> </li> </ul> </div> <ul class="list-unstyled collapse operations" ng-class="{in:api.open}"> <li ng-repeat="op in api.operations" class="operation {{op.httpMethod}}"> <div class="heading"> <a ng-click="op.open=!op.open;permalink(op.open?op.operationId:null)" href="javascript:;"> <div class="clearfix"> <span class="http-method text-uppercase" ng-bind="op.httpMethod"></span> <span class="path" ng-bind="op.path"></span> <span class="description pull-right" ng-bind="op.summary"></span> </div> </a> </div> <div class="content collapse" ng-class="{in:op.open}"> <div ng-if="op.description"> <h5>implementation notes</h5> <p ng-bind="op.description"></p> </div> <form role="form" name="explorerForm" ng-submit="explorerForm.$valid&&submitExplorer(op)"> <div ng-if="op.responseClass" class="response"> <h5>response class (status {{op.responseClass.status}})</h5> <div ng-if="op.responseClass.display!==-1"> <ul class="list-inline schema"> <li><a href="javascript:;" ng-click="op.responseClass.display=0" ng-class="{active:op.responseClass.display===0}">model</a></li> <li><a href="javascript:;" ng-click="op.responseClass.display=1" ng-class="{active:op.responseClass.display===1}">model schema</a></li> </ul> <pre class="model" ng-if="op.responseClass.display===0" ng-bind-html="op.responseClass.schema.model"></pre> <pre class="model-schema" ng-if="op.responseClass.display===1" ng-bind="op.responseClass.schema.json"></pre> </div> <div ng-if="op.produces" class="content-type"> <label for="responseContentType{{op.id}}">response content type</label> <select ng-model="form[op.id].responseType" ng-options="item for item in op.produces track by item" id="responseContentType{{op.id}}" name="responseContentType{{op.id}}" required></select> </div> </div> <div ng-if="op.parameters&&op.parameters.length>0" class="table-responsive"> <h5>parameters</h5> <table class="table table-condensed parameters"> <thead> <tr> <th class="name">parameter <th class="value">value <th class="desc">description <th class="type">parameter type <th class="data">data type   <tbody> <tr ng-repeat="param in op.parameters"> <td ng-class="{bold:param.required}"> <label for="param{{param.id}}" ng-bind="param.name"></label>  <td ng-class="{bold:param.required}"> <div ng-if="apiExplorer"> <div ng-if="param.in!==\'body\'" ng-switch="param.subtype"> <input ng-switch-when="file" type="file" file-input ng-model="form[op.id][param.name]" id="param{{param.id}}" placeholder="{{param.required?\'(required)\':\'\'}}" ng-required="param.required"> <select ng-switch-when="enum" ng-model="form[op.id][param.name]" id="param{{param.id}}"> <option ng-repeat="value in param.enum" value="{{value}}" ng-bind="value+(param.default===value?\' (default)\':\'\')" ng-selected="param.default===value"> </select> <input ng-switch-default type="text" ng-model="form[op.id][param.name]" id="param{{param.id}}" placeholder="{{param.required?\'(required)\':\'\'}}" ng-required="param.required"> </div> <div ng-if="param.in===\'body\'"> <textarea id="param{{param.id}}" ng-model="form[op.id][param.name]" ng-required="param.required"></textarea> <br> <div ng-if="op.consumes" class="content-type"> <label for="bodyContentType{{op.id}}">parameter content type</label> <select ng-model="form[op.id].contentType" id="bodyContentType{{op.id}}" name="bodyContentType{{op.id}}" ng-options="item for item in op.consumes track by item"></select> </div> </div> </div> <div ng-if="!apiExplorer"> <div ng-if="param.in!==\'body\'"> <div ng-if="param.default"><span ng-bind="param.default"></span> (default)</div> <div ng-if="param.enum"> <span ng-repeat="value in param.enum">{{value}}<span ng-if="!$last"> or </span></span> </div> <div ng-if="param.required"><strong>(required)</strong></div> </div> </div>  <td ng-class="{bold:param.required}" ng-bind-html="param.description"> <td ng-bind="param.in"> <td ng-if="param.type" ng-switch="param.type"> <span ng-switch-when="array" ng-bind="\'Array[\'+param.items.type+\']\'"></span> <span ng-switch-default ng-bind="param.type"></span>  <td ng-if="param.schema"> <ul class="list-inline schema"> <li><a href="javascript:;" ng-click="param.schema.display=0" ng-class="{active:param.schema.display===0}">model</a></li> <li><a href="javascript:;" ng-click="param.schema.display=1" ng-class="{active:param.schema.display===1}">model schema</a></li> </ul> <pre class="model" ng-if="param.schema.display===0&&param.schema.model" ng-bind-html="param.schema.model"></pre> <div class="model-schema" ng-if="param.schema.display===1&&param.schema.json"> <pre ng-bind="param.schema.json" ng-click="form[op.id][param.name]=param.schema.json" aria-described-by="help-{{param.id}}"></pre> <div id="help-{{param.id}}">click to set as parameter value</div> </div>    </table> </div> <div class="table-responsive" ng-if="op.hasResponses"> <h5>response messages</h5> <table class="table responses"> <thead> <tr> <th class="code">HTTP status code <th>reason <th>response model   <tbody> <tr ng-repeat="(code, resp) in op.responses"> <td ng-bind="code"> <td ng-bind-html="resp.description"> <td> <ul ng-if="resp.schema&&resp.schema.model&&resp.schema.json" class="list-inline schema"> <li><a href="javascript:;" ng-click="resp.display=0" ng-class="{active:resp.display===0}">model</a></li> <li><a href="javascript:;" ng-click="resp.display=1" ng-class="{active:resp.display===1}">model schema</a></li> </ul> <pre class="model" ng-if="resp.display===0&&resp.schema&&resp.schema.model" ng-bind-html="resp.schema.model"></pre> <pre class="model-schema" ng-if="resp.display===1&&resp.schema&&resp.schema.json" ng-bind="resp.schema.json"></pre>    </table> </div> <div ng-if="apiExplorer"> <button class="btn btn-default" ng-click="op.explorerResult=false;op.hideExplorerResult=false" type="submit" ng-disabled="op.loading" ng-bind="op.loading?\'loading...\':\'try it out!\'"></button> <a class="hide-try-it" ng-if="op.explorerResult&&!op.hideExplorerResult" ng-click="op.hideExplorerResult=true" href="javascript:;">hide response</a> </div> </form> <div ng-if="op.explorerResult" ng-show="!op.hideExplorerResult"> <h5>request URL</h5> <pre ng-bind="op.explorerResult.url"></pre> <h5>response body</h5> <pre ng-bind="op.explorerResult.response.body"></pre> <h5>response code</h5> <pre ng-bind="op.explorerResult.response.status"></pre> <h5>response headers</h5> <pre ng-bind="op.explorerResult.response.headers"></pre> </div> </div> </li> </ul> </li> </ul> <div class="api-version" ng-if="infos"> [BASE URL: <span class="h4" ng-bind="infos.basePath"></span>, API VERSION: <span class="h4" ng-bind="infos.version"></span>, HOST: <span class="h4" ng-bind="infos.scheme"></span>://<span class="h4" ng-bind="infos.host"></span>] </div> </div>')}]);